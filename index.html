<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Marte Not Found — 404</title>

    <style>
      /* === Reset & base === */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html,
      body {
        height: 100%;
      }

      body {
        background: #02040a;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 16px;
        overflow-y: auto;
        overflow-x: hidden;
      }

      /* === Card principal === */
      .poster {
        background: #0c0f18;
        border-radius: 20px;
        padding: 40px 36px 42px;
        max-width: 780px;
        width: 100%;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
        text-align: center;
        position: relative;
        z-index: 2;
        border: 1px solid rgba(124, 255, 107, 0.25);
      }

      h1 {
        font-family: monospace;
        font-size: clamp(16px, 2.4vw, 22px);
        line-height: 1.7;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        margin-bottom: 12px;
        color: #7cff6b;
        text-shadow: 0 0 8px rgba(124, 255, 107, 0.9);
      }
      h1 span {
        color: #ffffff;
      }

      .tagline {
        font-size: 14px;
        opacity: 0.85;
        margin-bottom: 24px;
      }

      /* === Ventana / consola === */
      .window {
        background: #020308;
        border-radius: 10px;
        height: 320px;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(124, 255, 107, 0.4);
        box-shadow: 0 0 18px rgba(124, 255, 107, 0.3) inset;
      }

      .console {
        position: absolute;
        inset: 18px 20px auto 20px;
        text-align: left;
        font-family: monospace;
        font-size: 12px;
        color: #7cff6b;
        line-height: 1.5;
        text-shadow: 0 0 6px rgba(124, 255, 107, 0.9);
        max-height: 110px;
        overflow: hidden;
      }

      .console-line + .console-line {
        margin-top: 3px;
      }

      .console-tag {
        text-transform: uppercase;
        letter-spacing: 2px;
      }

      .pixel-404 {
        position: absolute;
        bottom: 95px;
        left: 50%;
        transform: translateX(-50%);
        font-family: monospace;
        font-size: clamp(20px, 3.4vw, 30px);
        color: #7cff6b;
        text-shadow: 0 0 10px rgba(124, 255, 107, 1);
        text-align: center;
        padding: 0 12px;
      }

      .portal {
        position: absolute;
        left: 8%;
        right: 8%;
        bottom: 14%;
        height: 26%;
        border-radius: 50% / 46%;
        background: radial-gradient(
            circle at 30% 20%,
            rgba(255, 255, 255, 0.7),
            transparent 55%
          ),
          linear-gradient(
            180deg,
            #7cff6b 0%,
            #4fc4ff 40%,
            #8746b9 70%,
            #ff4a38 100%
          );
        filter: drop-shadow(0 10px 22px rgba(0, 0, 0, 0.8));
      }

      canvas#game {
        margin-top: 26px;
        width: 100%;
        height: 140px;
        background: #05060c;
        border-radius: 10px;
        display: block;
        border: 1px solid rgba(124, 255, 107, 0.4);
        box-shadow: 0 0 16px rgba(124, 255, 107, 0.25) inset;
      }

      .hint {
        margin-top: 10px;
        font-size: 12px;
        opacity: 0.8;
      }

      canvas#space {
        position: fixed;
        inset: 0;
        z-index: 1;
        pointer-events: none;
      }

      /* ===== RESPONSIVE FIXES ===== */

      @media (max-width: 768px) {
        body {
          padding: 12px;
        }

        .poster {
          padding: 28px 20px 30px;
        }

        .window {
          height: 260px;
        }

        .console {
          font-size: 11px;
          inset: 10px 12px auto 12px;
          max-height: 95px;
        }

        .pixel-404 {
          bottom: 78px;
          font-size: 20px;
        }

        .portal {
          bottom: 8%;
          height: 22%;
        }

        canvas#game {
          height: 120px !important;
          margin-top: 34px !important;
        }
      }

      @media (max-width: 430px) {
        .poster {
          padding: 24px 16px 26px;
        }

        .window {
          height: 220px;
        }

        .console {
          font-size: 10px;
          max-height: 80px;
        }

        .pixel-404 {
          bottom: 65px;
          font-size: 17px;
        }

        .portal {
          bottom: 10%;
          height: 20%;
        }

        canvas#game {
          height: 110px !important;
          margin-top: 40px !important;
        }
      }

      @media (max-width: 360px) {
        .window {
          height: 190px;
        }

        .console {
          font-size: 9px;
          max-height: 70px;
        }

        .pixel-404 {
          bottom: 52px;
          font-size: 14px;
        }

        canvas#game {
          height: 100px !important;
          margin-top: 45px !important;
        }
      }
    </style>
  </head>

  <body>
    <main class="poster">
      <h1>
        Ni <span>ChatGPT</span> encontró vida<br />
        en Marte
      </h1>
      <p class="tagline">
        Ayuda a la IA a esquivar errores 404 y seguir escaneando el planeta.
      </p>

      <div class="window">
        <div class="console">
          <p class="console-line console-tag">[LOG_404_TO_MARS]</p>
          <p class="console-line">
            Houston, la señal con Marte se ha perdido. El planeta no aparece en
            el sistema.
          </p>
          <p class="console-line">
            ChatGPT ha tomado el control del escáner para buscar vida
            inteligente.
          </p>
          <p class="console-line">
            Tu misión: esquivar los glitches 404 y mantener la búsqueda activa.
          </p>
        </div>

        <div class="pixel-404">ERROR 404: MARS NOT FOUND</div>
        <div class="portal"></div>
      </div>

      <canvas id="game"></canvas>
      <p class="hint">Pulsa <b>Space</b> o toca la pantalla para saltar.</p>
    </main>

    <canvas id="space"></canvas>

    <script>
      /* === Estrellas === */
      const bg = document.getElementById("space");
      const bctx = bg.getContext("2d");
      let stars = [];

      function resizeStars() {
        bg.width = innerWidth;
        bg.height = innerHeight;
        stars = Array.from({ length: 160 }, () => ({
          x: Math.random() * innerWidth,
          y: Math.random() * innerHeight,
          r: Math.random() * 1.5 + 0.3,
          s: Math.random() * 0.6 + 0.2,
        }));
      }

      function drawStars() {
        bctx.clearRect(0, 0, innerWidth, innerHeight);
        bctx.fillStyle = "#ffffff";
        for (const s of stars) {
          bctx.beginPath();
          bctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
          bctx.fill();
          s.x -= s.s;
          if (s.x < 0) s.x = innerWidth;
        }
        requestAnimationFrame(drawStars);
      }

      resizeStars();
      drawStars();
      addEventListener("resize", resizeStars);

      /* === Minijuego === */
      const canvas = document.getElementById("game");
      const ctx = canvas.getContext("2d");

      function resizeGame() {
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;
      }
      resizeGame();
      addEventListener("resize", resizeGame);

      const player = {
        x: 40,
        y: 60,
        vy: 0,
        w: 30,
        h: 30,
        onGround: true,
      };

      const state = { speed: 2.1, gravity: 0.5, tick: 0, running: true };
      let glitches = [];

      function spawnGlitch() {
        const gap = 120 + Math.random() * 60;
        const last = glitches.length
          ? glitches[glitches.length - 1].x
          : canvas.width;
        const h = 18 + Math.random() * 24;
        glitches.push({
          x: last + gap,
          w: 18 + Math.random() * 12,
          h,
        });
      }

      function jump() {
        if (player.onGround) {
          player.vy = -9.5;
          player.onGround = false;
        }
      }

      addEventListener("keydown", (e) => {
        if (e.code === "Space") {
          e.preventDefault();
          jump();
        }
      });

      canvas.addEventListener("pointerdown", jump);

      function update() {
        if (!state.running) return;
        state.tick++;

        if (state.tick % 70 === 0) spawnGlitch();

        player.vy += state.gravity;
        player.y += player.vy;

        const ground = canvas.height - 14;
        if (player.y + player.h >= ground) {
          player.y = ground - player.h;
          player.vy = 0;
          player.onGround = true;
        }

        for (const g of glitches) g.x -= state.speed;
        glitches = glitches.filter((g) => g.x + g.w > 0);

        state.speed += 0.0003;

        for (const g of glitches) {
          if (
            player.x < g.x + g.w &&
            player.x + player.w > g.x &&
            player.y + player.h > canvas.height - g.h - 14
          ) {
            gameOver();
          }
        }
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const h = canvas.height;

        ctx.fillStyle = "#181b23";
        ctx.fillRect(0, h - 8, canvas.width, 8);

        ctx.fillStyle = "rgba(124,255,107,0.9)";
        for (const g of glitches) {
          ctx.fillRect(g.x, h - g.h - 8, g.w, g.h);
        }

        const x = player.x;
        const y = player.y;
        ctx.save();
        ctx.translate(x + 15, y + 15);
        ctx.fillStyle = "rgba(124,255,107,0.25)";
        ctx.beginPath();
        ctx.arc(0, 0, 18, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "#7cff6b";
        ctx.beginPath();
        ctx.arc(0, 0, 11, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = "#ffffff";
        ctx.beginPath();
        ctx.arc(-4, -4, 3, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      }

      function loop() {
        update();
        draw();
        requestAnimationFrame(loop);
      }

      function gameOver() {
        state.running = false;
        ctx.fillStyle = "rgba(0,0,0,0.7)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#7cff6b";
        ctx.textAlign = "center";
        ctx.font = "14px monospace";
        ctx.fillText(
          "ChatGPT perdió la señal con Marte.",
          canvas.width / 2,
          canvas.height / 2 - 8
        );
        ctx.fillText(
          "Click o Space para reintentar el escaneo.",
          canvas.width / 2,
          canvas.height / 2 + 14
        );

        function restart() {
          state.running = true;
          state.speed = 2.1;
          glitches = [];
          player.y = 60;
          player.vy = 0;
          removeEventListener("keydown", onKey);
          canvas.removeEventListener("pointerdown", restart);
        }

        function onKey(e) {
          if (e.code === "Space") restart();
        }

        addEventListener("keydown", onKey);
        canvas.addEventListener("pointerdown", restart);
      }

      loop();
    </script>
  </body>
</html>
